import{_ as n}from"./LinkItem.65bc6d8d.js";import{_ as s}from"./Code.fee8bdde.js";import{_ as a}from"./app.252c1e4c.js";import{h as t,o,a as e,w as p,b as c,k as l}from"./vendor.80607e96.js";const u=c("p",null,[c("div",{class:"table-of-contents"},[c("ul",null,[c("li",null,[c("a",{href:"#delete-pycache"},[l(" delete "),c("strong",null,"pycache")])]),c("li",null,[c("a",{href:"#doc"}," doc")]),c("li",null,[c("a",{href:"#some-posts-about-python"}," some posts about python")]),c("li",null,[c("a",{href:"#command-line-argument-parse"}," command line argument parse")]),c("li",null,[c("a",{href:"#progess-bar"}," progess bar")]),c("li",null,[c("a",{href:"#requirements-txt"}," requirements.txt")]),c("li",null,[c("a",{href:"#tar-file"}," tar file")]),c("li",null,[c("a",{href:"#zip-file"}," zip file")]),c("li",null,[c("a",{href:"#subprocess"}," subprocess")]),c("li",null,[c("a",{href:"#sh"}," sh")]),c("li",null,[c("a",{href:"#format"}," format")]),c("li",null,[c("a",{href:"#listdir"}," listdir")]),c("li",null,[c("a",{href:"#chunk"}," chunk")]),c("li",null,[c("a",{href:"#atexit"}," atexit")]),c("li",null,[c("a",{href:"#ordereddict"}," OrderedDict")]),c("li",null,[c("a",{href:"#logging"}," logging")]),c("li",null,[c("a",{href:"#list-间隔差"}," list 间隔差")]),c("li",null,[c("a",{href:"#统计数据分布"}," 统计数据分布")]),c("li",null,[c("a",{href:"#随机采样"}," 随机采样")]),c("li",null,[c("a",{href:"#pprint"}," pprint")]),c("li",null,[c("a",{href:"#frozenset"}," frozenset")]),c("li",null,[c("a",{href:"#dict"}," dict")]),c("li",null,[c("a",{href:"#json"}," json")]),c("li",null,[c("a",{href:"#textwrap-dedent"}," textwrap.dedent")]),c("li",null,[c("a",{href:"#bytes-转-str-编码"}," bytes 转 str 编码")]),c("li",null,[c("a",{href:"#remove-suffix"}," remove suffix")]),c("li",null,[c("a",{href:"#使用-requests-传递-formdata"}," 使用 Requests 传递 formdata")]),c("li",null,[c("a",{href:"#统计代码运行时间"}," 统计代码运行时间")]),c("li",null,[c("a",{href:"#short-unique-random-string"}," short unique random string")]),c("li",null,[c("a",{href:"#csv"}," csv")]),c("li",null,[c("a",{href:"#change-dir"}," change dir")]),c("li",null,[c("a",{href:"#explicitly-ignore-error"}," explicitly ignore error")]),c("li",null,[c("a",{href:"#logging-support"}," logging support"),c("ul",null,[c("li",null,[c("a",{href:"#args-and-kwargs-的类型标注"}," args and kwargs 的类型标注")])])])])])],-1),i=c("h2",{id:"delete-pycache"},[c("a",{class:"header-anchor",href:"#delete-pycache","aria-hidden":"true"},"#"),l(" delete "),c("code",null,"__pycache__")],-1),r=c("pre",{class:"language-bash"},[c("code",{class:"language-bash"},[l("$ "),c("span",{class:"token function"},"find"),l(),c("span",{class:"token builtin class-name"},"."),l(" -name "),c("span",{class:"token string"},"'__pycache__'"),l(" -type d -exec "),c("span",{class:"token function"},"rm"),l(" -rf "),c("span",{class:"token punctuation"},"{"),c("span",{class:"token punctuation"},"}"),l(),c("span",{class:"token punctuation"},"\\"),c("span",{class:"token punctuation"},";"),l("\n")])],-1),k=c("h2",{id:"doc"},[c("a",{class:"header-anchor",href:"#doc","aria-hidden":"true"},"#"),l(" doc")],-1),d=c("p",null,"当我们日常开发时，一些不太常用的包或者想要确认某个方法的具体的说明时，可以通过命令行的方式去查看。",-1),g=c("pre",{class:"language-bash"},[c("code",{class:"language-bash"},"$ python -m pydoc sys\n")],-1),h=c("p",null,[l("上述例子中的 "),c("code",null,"sys"),l(" 可以替换成任意你期望的包名, 或者该包名下的具体的方法。")],-1),m=c("pre",{class:"language-bash"},[c("code",{class:"language-bash"},"$ python -m pydoc rich.theme\n")],-1),y=c("p",null,"除此之外，我们还可以直接启动一个本地 server 的方式去更友好的查看文档。",-1),f=c("pre",{class:"language-bash"},[c("code",{class:"language-bash"},[c("span",{class:"token comment"},"# 在 localhost:1234 上启动一个文档服务"),l("\n$ python -m pydoc -p "),c("span",{class:"token number"},"1234"),l("\n")])],-1),b=c("h2",{id:"some-posts-about-python"},[c("a",{class:"header-anchor",href:"#some-posts-about-python","aria-hidden":"true"},"#"),l(" some posts about python")],-1),w=l("讲解 Python 中有关 "),x=c("code",null,"*",-1),_=l(" 的使用"),v=c("h2",{id:"command-line-argument-parse"},[c("a",{class:"header-anchor",href:"#command-line-argument-parse","aria-hidden":"true"},"#"),l(" command line argument parse")],-1),z=c("p",null,[l("使用 ["),c("a",{href:"https://click.palletsprojects.com/en/7.x/",target:"_blank",rel:"noopener"},"click"),l("] 作为解析库，可以方便的实现子命令操作。整理一些使用中遇到的问题。")],-1),j=c("ul",null,[c("li",null,"对 argument 进行注释")],-1),q=c("p",null,[l("使用多行注释的方式 "),c("code",null,'""" xxx """'),l("。但是 click 默认是现在在统一行，去除掉了换行的操作。所以在有多参数的情况下显示比较乱。解决方式是：")],-1),P=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token decorator annotation punctuation"},[l("@click"),c("span",{class:"token punctuation"},"."),l("command")]),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token decorator annotation punctuation"},[l("@click"),c("span",{class:"token punctuation"},"."),l("argument")]),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},"'gt'"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token builtin"},"type"),c("span",{class:"token operator"},"="),l("click"),c("span",{class:"token punctuation"},"."),l("Path"),c("span",{class:"token punctuation"},"("),l("exists"),c("span",{class:"token operator"},"="),c("span",{class:"token boolean"},"True"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token decorator annotation punctuation"},[l("@click"),c("span",{class:"token punctuation"},"."),l("argument")]),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},"'prefix'"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token builtin"},"type"),c("span",{class:"token operator"},"="),l("click"),c("span",{class:"token punctuation"},"."),l("Path"),c("span",{class:"token punctuation"},"("),l("exists"),c("span",{class:"token operator"},"="),c("span",{class:"token boolean"},"True"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token keyword"},"def"),l(),c("span",{class:"token function"},"execute"),c("span",{class:"token punctuation"},"("),l("gt"),c("span",{class:"token punctuation"},","),l(" prefix"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},":"),l("\n    "),c("span",{class:"token triple-quoted-string string"},'"""\n       \\b \n       explain the command usage\n       gt: xxxx\n       prefix: xxxxx\n    """'),l("\n")])],-1),T=c("h2",{id:"progess-bar"},[c("a",{class:"header-anchor",href:"#progess-bar","aria-hidden":"true"},"#"),l(" progess bar")],-1),D=c("p",null,[l("使用 ["),c("a",{href:"https://github.com/tqdm/tqdm",target:"_blank",rel:"noopener"},"tqdm"),l("] 搭配各种场景使用，比如在 requests 中显示现在的进度时，可以有如下的方式：")],-1),F=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[l("r "),c("span",{class:"token operator"},"="),l(" requests"),c("span",{class:"token punctuation"},"."),l("get"),c("span",{class:"token punctuation"},"("),l("url"),c("span",{class:"token punctuation"},","),l(" stream"),c("span",{class:"token operator"},"="),c("span",{class:"token boolean"},"True"),c("span",{class:"token punctuation"},","),l(" allow_redirects"),c("span",{class:"token operator"},"="),c("span",{class:"token boolean"},"True"),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),l(),c("span",{class:"token comment"},"# status code check "),l("\npath "),c("span",{class:"token operator"},"="),l(" pathlib"),c("span",{class:"token punctuation"},"."),l("Path"),c("span",{class:"token punctuation"},"("),l("filename"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},"."),l("expanduser"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},"."),l("resolve"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),l("\npath"),c("span",{class:"token punctuation"},"."),l("parent"),c("span",{class:"token punctuation"},"."),l("mkdir"),c("span",{class:"token punctuation"},"("),l("parents"),c("span",{class:"token operator"},"="),c("span",{class:"token boolean"},"True"),c("span",{class:"token punctuation"},","),l(" exist_ok"),c("span",{class:"token operator"},"="),c("span",{class:"token boolean"},"True"),c("span",{class:"token punctuation"},")"),l("\n\ndesc "),c("span",{class:"token operator"},"="),l(" filename"),c("span",{class:"token punctuation"},"."),l("ljust"),c("span",{class:"token punctuation"},"("),c("span",{class:"token number"},"22"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},"' '"),c("span",{class:"token punctuation"},")"),l(),c("span",{class:"token comment"},"# 22 is the lenght bigger than filename, should change"),l("\nr"),c("span",{class:"token punctuation"},"."),l("raw"),c("span",{class:"token punctuation"},"."),l("read "),c("span",{class:"token operator"},"="),l(" functools"),c("span",{class:"token punctuation"},"."),l("partial"),c("span",{class:"token punctuation"},"("),l("r"),c("span",{class:"token punctuation"},"."),l("raw"),c("span",{class:"token punctuation"},"."),l("read"),c("span",{class:"token punctuation"},","),l(" decode_content"),c("span",{class:"token operator"},"="),c("span",{class:"token boolean"},"True"),c("span",{class:"token punctuation"},")"),l("  "),c("span",{class:"token comment"},"# Decompress if needed"),l("\n"),c("span",{class:"token keyword"},"with"),l(" tqdm"),c("span",{class:"token punctuation"},"."),l("tqdm"),c("span",{class:"token punctuation"},"."),l("wrapattr"),c("span",{class:"token punctuation"},"("),l("r"),c("span",{class:"token punctuation"},"."),l("raw"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},'"read"'),c("span",{class:"token punctuation"},","),l(" total"),c("span",{class:"token operator"},"="),l("file_size"),c("span",{class:"token punctuation"},","),l(" desc"),c("span",{class:"token operator"},"="),l("desc"),c("span",{class:"token punctuation"},")"),l(),c("span",{class:"token keyword"},"as"),l(" r_raw"),c("span",{class:"token punctuation"},":"),l("\n     "),c("span",{class:"token keyword"},"with"),l(" path"),c("span",{class:"token punctuation"},"."),c("span",{class:"token builtin"},"open"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},'"wb"'),c("span",{class:"token punctuation"},")"),l(),c("span",{class:"token keyword"},"as"),l(" f"),c("span",{class:"token punctuation"},":"),l("\n            shutil"),c("span",{class:"token punctuation"},"."),l("copyfileobj"),c("span",{class:"token punctuation"},"("),l("r_raw"),c("span",{class:"token punctuation"},","),l(" f"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),H=c("p",null,"同时也可以在命令行中使用：",-1),$=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[l("find "),c("span",{class:"token punctuation"},"."),l(),c("span",{class:"token operator"},"-"),l("name "),c("span",{class:"token string"},"'*.py'"),l(),c("span",{class:"token operator"},"-"),c("span",{class:"token builtin"},"type"),l(" f "),c("span",{class:"token operator"},"-"),c("span",{class:"token keyword"},"exec"),l(" cat \\"),c("span",{class:"token punctuation"},"{"),c("span",{class:"token punctuation"},"}"),l(" \\"),c("span",{class:"token punctuation"},";"),l(" \\\n  "),c("span",{class:"token operator"},"|"),l(" tqdm "),c("span",{class:"token operator"},"-"),c("span",{class:"token operator"},"-"),l("unit loc "),c("span",{class:"token operator"},"-"),c("span",{class:"token operator"},"-"),l("unit_scale "),c("span",{class:"token operator"},"-"),c("span",{class:"token operator"},"-"),l("total "),c("span",{class:"token number"},"857366"),l(),c("span",{class:"token operator"},">>"),l(),c("span",{class:"token operator"},"/"),l("dev"),c("span",{class:"token operator"},"/"),l("null\n"),c("span",{class:"token number"},"100"),c("span",{class:"token operator"},"%"),c("span",{class:"token operator"},"|"),l("█████████████████████████████████"),c("span",{class:"token operator"},"|"),l(" 857K"),c("span",{class:"token operator"},"/"),l("857K "),c("span",{class:"token punctuation"},"["),c("span",{class:"token number"},"00"),c("span",{class:"token punctuation"},":"),c("span",{class:"token number"},"04"),c("span",{class:"token operator"},"<"),c("span",{class:"token number"},"00"),c("span",{class:"token punctuation"},":"),c("span",{class:"token number"},"00"),c("span",{class:"token punctuation"},","),l(" 246Kloc"),c("span",{class:"token operator"},"/"),l("s"),c("span",{class:"token punctuation"},"]"),l("\n")])],-1),I=c("p",null,[l("更多使用参考文档 ["),c("a",{href:"https://tqdm.github.io/docs",target:"_blank",rel:"noopener"},"tqdm documention"),l("] 。")],-1),S=c("h2",{id:"requirements-txt"},[c("a",{class:"header-anchor",href:"#requirements-txt","aria-hidden":"true"},"#"),l(" requirements.txt")],-1),B=c("p",null,"这个文件可以用于python项目初始化时安装依赖使用。可以通过两种方式获取到：",-1),E=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token comment"},"# 获取完整的依赖环境"),l("\n$ pip3 freeze "),c("span",{class:"token operator"},">"),l(" requirements"),c("span",{class:"token punctuation"},"."),l("txt\n\n"),c("span",{class:"token comment"},"# 获取必要的依赖"),l("\n$ pip install pipreqs\n$ pipreqs "),c("span",{class:"token punctuation"},"."),l("\n\n"),c("span",{class:"token comment"},"# 使用"),l("\n$ pip install "),c("span",{class:"token operator"},"-"),l("r requirements"),c("span",{class:"token punctuation"},"."),l("txt\n")])],-1),A=c("h2",{id:"tar-file"},[c("a",{class:"header-anchor",href:"#tar-file","aria-hidden":"true"},"#"),l(" tar file")],-1),N=c("p",null,"获取 tar.gz 文件中的顶层目录的名称，使用下面简单的方式：",-1),O=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[l("archive "),c("span",{class:"token operator"},"="),l(" tarfile"),c("span",{class:"token punctuation"},"."),c("span",{class:"token builtin"},"open"),c("span",{class:"token punctuation"},"("),l("filepath"),c("span",{class:"token punctuation"},","),l(" mode"),c("span",{class:"token operator"},"="),c("span",{class:"token string"},"'r'"),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token keyword"},"print"),l(" os"),c("span",{class:"token punctuation"},"."),l("path"),c("span",{class:"token punctuation"},"."),l("commonprefix"),c("span",{class:"token punctuation"},"("),l("archive"),c("span",{class:"token punctuation"},"."),l("getnames"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),R=c("h2",{id:"zip-file"},[c("a",{class:"header-anchor",href:"#zip-file","aria-hidden":"true"},"#"),l(" zip file")],-1),U=c("p",null,"使用 zipfile 库，更加灵活的打包 zip 包。",-1),C=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"from"),l(" zipfile "),c("span",{class:"token keyword"},"import"),l(" ZipFile\n\n"),c("span",{class:"token keyword"},"with"),l(" ZipFile"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},"'target.zip'"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},"'w'"),c("span",{class:"token punctuation"},")"),l(),c("span",{class:"token keyword"},"as"),l(" newzip"),c("span",{class:"token punctuation"},":"),l("\n    newzip"),c("span",{class:"token punctuation"},"."),l("write"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},"'directory_name'"),c("span",{class:"token punctuation"},")"),l("\n    newzip"),c("span",{class:"token punctuation"},"."),l("write"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},"'file_name'"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),G=c("p",null,"使用 shutil 中的 make_archive 函数生成的包有点奇怪(?)，不如使用 zipfile 来的灵活。",-1),L=c("h2",{id:"subprocess"},[c("a",{class:"header-anchor",href:"#subprocess","aria-hidden":"true"},"#"),l(" subprocess")],-1),W=c("p",null,"使用 subprocess 时，往往需要添加子进程中的环境变量，可以使用:",-1),K=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"import"),l(" subprocess"),c("span",{class:"token punctuation"},","),l(" os\nmy_env "),c("span",{class:"token operator"},"="),l(" os"),c("span",{class:"token punctuation"},"."),l("environ"),c("span",{class:"token punctuation"},"."),l("copy"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),l("\nmy_env"),c("span",{class:"token punctuation"},"["),c("span",{class:"token string"},'"PATH"'),c("span",{class:"token punctuation"},"]"),l(),c("span",{class:"token operator"},"="),l(),c("span",{class:"token string"},'"/usr/sbin:/sbin:"'),l(),c("span",{class:"token operator"},"+"),l(" my_env"),c("span",{class:"token punctuation"},"["),c("span",{class:"token string"},'"PATH"'),c("span",{class:"token punctuation"},"]"),l("\nsubprocess"),c("span",{class:"token punctuation"},"."),l("Popen"),c("span",{class:"token punctuation"},"("),l("my_command"),c("span",{class:"token punctuation"},","),l(" env"),c("span",{class:"token operator"},"="),l("my_env"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),Z=c("h2",{id:"sh"},[c("a",{class:"header-anchor",href:"#sh","aria-hidden":"true"},"#"),l(" sh")],-1),J=c("p",null,"sh is a full-fledged subprocess replacement for Python 2.6 - 3.8, PyPy and PyPy3 that allows you to call any program as if it were a function.",-1),M=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"import"),l(" sh\n"),c("span",{class:"token comment"},"# like command run in bash. $ sed -i 's/a/A/g' filename"),l("\nsh"),c("span",{class:"token punctuation"},"."),l("sed"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},"["),c("span",{class:"token string"},"'-i'"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string-interpolation"},[c("span",{class:"token string"},"f's/a/A/g'")]),c("span",{class:"token punctuation"},","),l(" filename"),c("span",{class:"token punctuation"},"]"),c("span",{class:"token punctuation"},"}"),l("'"),c("span",{class:"token punctuation"},"]"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),Y=c("h2",{id:"format"},[c("a",{class:"header-anchor",href:"#format","aria-hidden":"true"},"#"),l(" format")],-1),Q=c("p",null,[l("python 中用于格式的操作，在格式化数字的时候，可以方便的控制小数点后的面位数。具体的可以参考["),c("a",{href:"https://docs.python.org/3/library/string.html#format-examples",target:"_blank",rel:"noopener"},"string format"),l("]")],-1),V=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token string"},'"{:.2f}"'),c("span",{class:"token punctuation"},"."),c("span",{class:"token builtin"},"format"),c("span",{class:"token punctuation"},"("),c("span",{class:"token number"},"13.949999999999999"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),X=c("h2",{id:"listdir"},[c("a",{class:"header-anchor",href:"#listdir","aria-hidden":"true"},"#"),l(" listdir")],-1),nn=c("p",null,"python 中遍历目录有好几种方式，不同的方式满足于不同的场景。",-1),sn=c("ul",null,[c("li",null,"os.listdir")],-1),an=c("p",null,"列举出当前目录下所有的文件，同时我们可以通过文件类型去进行过滤。比如：",-1),tn=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"import"),l(" os \n\nfiles "),c("span",{class:"token operator"},"="),l(),c("span",{class:"token punctuation"},"["),l("f "),c("span",{class:"token keyword"},"for"),l(" f "),c("span",{class:"token keyword"},"in"),l(" os"),c("span",{class:"token punctuation"},"."),l("listdir"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},"'.'"),c("span",{class:"token punctuation"},")"),l(),c("span",{class:"token keyword"},"if"),l(" os"),c("span",{class:"token punctuation"},"."),l("path"),c("span",{class:"token punctuation"},"."),l("isfile"),c("span",{class:"token punctuation"},"("),l("f"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},"]"),l("\ndirs "),c("span",{class:"token operator"},"="),l(),c("span",{class:"token punctuation"},"["),l("d "),c("span",{class:"token keyword"},"for"),l(" d "),c("span",{class:"token keyword"},"in"),l(" os"),c("span",{class:"token punctuation"},"."),l("listdir"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},"'.'"),c("span",{class:"token punctuation"},")"),l(),c("span",{class:"token keyword"},"if"),l(" os"),c("span",{class:"token punctuation"},"."),l("path"),c("span",{class:"token punctuation"},"."),l("isdir"),c("span",{class:"token punctuation"},"("),l("d"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},"]"),l("\n")])],-1),on=c("ul",null,[c("li",null,"os.walk")],-1),en=c("p",null,"walk 一般会递归去获取当前目录下所有的文件包含子目录，需要通过指定一些配置来满足我们的需求。简单的使用如下：",-1),pn=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"import"),l(" os\n\n"),c("span",{class:"token keyword"},"for"),l(" root"),c("span",{class:"token punctuation"},","),l(" dirs"),c("span",{class:"token punctuation"},","),l(" files "),c("span",{class:"token keyword"},"in"),l(" os"),c("span",{class:"token punctuation"},"."),l("walk"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},"'.'"),c("span",{class:"token punctuation"},","),l(" topdown"),c("span",{class:"token operator"},"="),c("span",{class:"token boolean"},"True"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},":"),l("\n    dirs"),c("span",{class:"token punctuation"},"."),l("clear"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),l("\n    "),c("span",{class:"token keyword"},"for"),l(),c("span",{class:"token builtin"},"file"),l(),c("span",{class:"token keyword"},"in"),l(" files"),c("span",{class:"token punctuation"},":"),l("\n        "),c("span",{class:"token keyword"},"print"),c("span",{class:"token punctuation"},"("),c("span",{class:"token builtin"},"file"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),cn=c("p",null,[c("code",null,"dirs.clear()"),l(" 用于不递归遍历当前目录下的子目录。 如果不删除，则会显示当前目录下所有的文件包含子目录里面的文件。这需要结合具体的场景。")],-1),ln=c("ul",null,[c("li",null,"find(shell command with subprocess)")],-1),un=c("p",null,"这种方式是结合了 shell 的一些特性，一般不得以的情况下才使用。",-1),rn=c("h2",{id:"chunk"},[c("a",{class:"header-anchor",href:"#chunk","aria-hidden":"true"},"#"),l(" chunk")],-1),kn=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"def"),l(),c("span",{class:"token function"},"chunk"),c("span",{class:"token punctuation"},"("),l("iterable"),c("span",{class:"token punctuation"},","),l(" n"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},":"),l("\n    d "),c("span",{class:"token operator"},"="),l(),c("span",{class:"token punctuation"},"{"),c("span",{class:"token punctuation"},"}"),l("\n    "),c("span",{class:"token keyword"},"for"),l(" i"),c("span",{class:"token punctuation"},","),l(" x "),c("span",{class:"token keyword"},"in"),l(),c("span",{class:"token builtin"},"enumerate"),c("span",{class:"token punctuation"},"("),l("iterable"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},":"),l("\n        d"),c("span",{class:"token punctuation"},"."),l("setdefault"),c("span",{class:"token punctuation"},"("),l("i"),c("span",{class:"token operator"},"//"),l("n"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token punctuation"},"["),c("span",{class:"token punctuation"},"]"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},"."),l("append"),c("span",{class:"token punctuation"},"("),l("x"),c("span",{class:"token punctuation"},")"),l("\n    \n    "),c("span",{class:"token keyword"},"return"),l(),c("span",{class:"token builtin"},"list"),c("span",{class:"token punctuation"},"("),l("d"),c("span",{class:"token punctuation"},"."),l("values"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),dn=c("p",null,[l("或者使用 "),c("code",null,"more_itertools"),l(" 这个库， 可以更加简单的实现。")],-1),gn=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"import"),l(" more_itertools "),c("span",{class:"token keyword"},"as"),l(" mit\n\n"),c("span",{class:"token builtin"},"list"),c("span",{class:"token punctuation"},"("),l("mit"),c("span",{class:"token punctuation"},"."),l("chunked"),c("span",{class:"token punctuation"},"("),l("iterable"),c("span",{class:"token punctuation"},","),l(" n"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),hn=l(" 补充："),mn=c("p",null,"使用列表生成器也是可以完成相应的操作：",-1),yn=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token punctuation"},"["),l("lst"),c("span",{class:"token punctuation"},"["),l("i"),c("span",{class:"token punctuation"},":"),l("i "),c("span",{class:"token operator"},"+"),l(" n"),c("span",{class:"token punctuation"},"]"),l(),c("span",{class:"token keyword"},"for"),l(" i "),c("span",{class:"token keyword"},"in"),l(),c("span",{class:"token builtin"},"range"),c("span",{class:"token punctuation"},"("),c("span",{class:"token number"},"0"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token builtin"},"len"),c("span",{class:"token punctuation"},"("),l("lst"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},","),l(" n"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},"]"),l("\n")])],-1),fn=l("不造轮子，使用对应的库"),bn=c("h2",{id:"atexit"},[c("a",{class:"header-anchor",href:"#atexit","aria-hidden":"true"},"#"),l(" atexit")],-1),wn=c("p",null,"atexit 在注册时传递参数：",-1),xn=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[l("\n"),c("span",{class:"token keyword"},"def"),l(),c("span",{class:"token function"},"goodbye"),c("span",{class:"token punctuation"},"("),l("name"),c("span",{class:"token punctuation"},","),l(" adjective"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},":"),l("\n    "),c("span",{class:"token keyword"},"print"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},"'Goodbye %s, it was %s to meet you.'"),l(),c("span",{class:"token operator"},"%"),l(),c("span",{class:"token punctuation"},"("),l("name"),c("span",{class:"token punctuation"},","),l(" adjective"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},")"),l("\n\n"),c("span",{class:"token keyword"},"import"),l(" atexit\n\natexit"),c("span",{class:"token punctuation"},"."),l("register"),c("span",{class:"token punctuation"},"("),l("goodbye"),c("span",{class:"token punctuation"},","),l(" adjective"),c("span",{class:"token operator"},"="),c("span",{class:"token string"},"'nice'"),c("span",{class:"token punctuation"},","),l(" name"),c("span",{class:"token operator"},"="),c("span",{class:"token string"},"'Donny'"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),_n=c("h2",{id:"ordereddict"},[c("a",{class:"header-anchor",href:"#ordereddict","aria-hidden":"true"},"#"),l(" OrderedDict")],-1),vn=c("p",null,"将字典 key 转换成 list，可以按照如下的方式：",-1),zn=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(),c("span",{class:"token keyword"},"from"),l(" collections "),c("span",{class:"token keyword"},"import"),l(" OrderedDict\n"),c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(" a "),c("span",{class:"token operator"},"="),l(" OrderedDict"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},"{"),c("span",{class:"token string"},"'a'"),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token number"},"1"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},"'b'"),c("span",{class:"token punctuation"},":"),c("span",{class:"token number"},"2"),c("span",{class:"token punctuation"},"}"),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(" a"),c("span",{class:"token punctuation"},"."),l("keys"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),l("\nodict_keys"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},"["),c("span",{class:"token string"},"'a'"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},"'b'"),c("span",{class:"token punctuation"},"]"),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(" b "),c("span",{class:"token operator"},"="),l(),c("span",{class:"token punctuation"},"["),c("span",{class:"token operator"},"*"),l("a"),c("span",{class:"token punctuation"},"]"),l("\n"),c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(" b\n"),c("span",{class:"token punctuation"},"["),c("span",{class:"token string"},"'a'"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},"'b'"),c("span",{class:"token punctuation"},"]"),l("\n"),c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(" \n")])],-1),jn=c("p",null,[l("单纯的 keys 是 "),c("code",null,"odict_keys"),l(" 类型，而不是 "),c("code",null,"list"),l(" 类型。所以通过解引用直接获取生成 key 的 list 。")],-1),qn=c("h2",{id:"logging"},[c("a",{class:"header-anchor",href:"#logging","aria-hidden":"true"},"#"),l(" logging")],-1),Pn=c("p",null,"在使用 logging 时，我们在自定义输出格式时，使用如下的方式：",-1),Tn=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[l("logging"),c("span",{class:"token punctuation"},"."),l("basicConfig"),c("span",{class:"token punctuation"},"("),c("span",{class:"token builtin"},"format"),c("span",{class:"token operator"},"="),c("span",{class:"token string"},"'%(asctime)s,%(msecs)03d %(levelname)-8s [%(pathname)s:%(lineno)d in function %(funcName)s] %(message)s'"),c("span",{class:"token punctuation"},","),l(" datefmt"),c("span",{class:"token operator"},"="),c("span",{class:"token string"},"'%Y-%m-%d:%H:%M:%S'"),c("span",{class:"token punctuation"},","),l(" level"),c("span",{class:"token operator"},"="),l("logging"),c("span",{class:"token punctuation"},"."),l("DEBUG"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),Dn=c("p",null,[l("注意这边的 "),c("code",null,"%(msecs)03d"),l(" 这个是用来保留 3 位毫秒数的，方便后续的处理。")],-1),Fn=c("h2",{id:"list-间隔差"},[c("a",{class:"header-anchor",href:"#list-间隔差","aria-hidden":"true"},"#"),l(" list 间隔差")],-1),Hn=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[l("t "),c("span",{class:"token operator"},"="),l(),c("span",{class:"token punctuation"},"["),c("span",{class:"token number"},"1"),c("span",{class:"token punctuation"},","),c("span",{class:"token number"},"2"),c("span",{class:"token punctuation"},","),c("span",{class:"token number"},"4"),c("span",{class:"token punctuation"},","),c("span",{class:"token number"},"6"),c("span",{class:"token punctuation"},"]"),l("\nv "),c("span",{class:"token operator"},"="),l(),c("span",{class:"token punctuation"},"["),l("t"),c("span",{class:"token punctuation"},"["),l("i"),c("span",{class:"token operator"},"+"),c("span",{class:"token number"},"1"),c("span",{class:"token punctuation"},"]"),c("span",{class:"token operator"},"-"),l("t"),c("span",{class:"token punctuation"},"["),l("i"),c("span",{class:"token punctuation"},"]"),l(),c("span",{class:"token keyword"},"for"),l(" i "),c("span",{class:"token keyword"},"in"),l(),c("span",{class:"token builtin"},"range"),c("span",{class:"token punctuation"},"("),c("span",{class:"token builtin"},"len"),c("span",{class:"token punctuation"},"("),l("t"),c("span",{class:"token punctuation"},")"),c("span",{class:"token operator"},"-"),c("span",{class:"token number"},"1"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},"]"),l("\n"),c("span",{class:"token comment"},"# [1,2,2]"),l("\n")])],-1),$n=c("h2",{id:"统计数据分布"},[c("a",{class:"header-anchor",href:"#统计数据分布","aria-hidden":"true"},"#"),l(" 统计数据分布")],-1),In=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"from"),l(" itertools "),c("span",{class:"token keyword"},"import"),l(" groupby\n\n"),c("span",{class:"token keyword"},"def"),l(),c("span",{class:"token function"},"histogram"),c("span",{class:"token punctuation"},"("),l("data"),c("span",{class:"token punctuation"},","),l(" step"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},":"),l("\n    "),c("span",{class:"token keyword"},"for"),l(" k"),c("span",{class:"token punctuation"},","),l(" g "),c("span",{class:"token keyword"},"in"),l(" groupby"),c("span",{class:"token punctuation"},"("),c("span",{class:"token builtin"},"sorted"),c("span",{class:"token punctuation"},"("),l("data"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},","),l(" key"),c("span",{class:"token operator"},"="),c("span",{class:"token keyword"},"lambda"),l(" x"),c("span",{class:"token punctuation"},":"),l(" x"),c("span",{class:"token operator"},"//"),l("step"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},":"),l("\n        "),c("span",{class:"token keyword"},"print"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},"'{}-{}: {}'"),c("span",{class:"token punctuation"},"."),c("span",{class:"token builtin"},"format"),c("span",{class:"token punctuation"},"("),l("k"),c("span",{class:"token operator"},"*"),l("step"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token punctuation"},"("),l("k"),c("span",{class:"token operator"},"+"),c("span",{class:"token number"},"1"),c("span",{class:"token punctuation"},")"),c("span",{class:"token operator"},"*"),l("step"),c("span",{class:"token operator"},"-"),c("span",{class:"token number"},"1"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token builtin"},"len"),c("span",{class:"token punctuation"},"("),c("span",{class:"token builtin"},"list"),c("span",{class:"token punctuation"},"("),l("g"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),Sn=c("h2",{id:"随机采样"},[c("a",{class:"header-anchor",href:"#随机采样","aria-hidden":"true"},"#"),l(" 随机采样")],-1),Bn=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"import"),l(" random\n"),c("span",{class:"token keyword"},"import"),l(" glob\n\npbfiles "),c("span",{class:"token operator"},"="),l(),c("span",{class:"token punctuation"},"["),l("f "),c("span",{class:"token keyword"},"for"),l(" f "),c("span",{class:"token keyword"},"in"),l(" glob"),c("span",{class:"token punctuation"},"."),l("glob"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},'"trt_data_pb/*.pb"'),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},"]"),l("\n\nrandom_pb "),c("span",{class:"token operator"},"="),l(" random"),c("span",{class:"token punctuation"},"."),l("sample"),c("span",{class:"token punctuation"},"("),l("pbfiles"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token number"},"1000"),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token keyword"},"print"),c("span",{class:"token punctuation"},"("),l("random_pb"),c("span",{class:"token punctuation"},"["),c("span",{class:"token punctuation"},":"),c("span",{class:"token number"},"10"),c("span",{class:"token punctuation"},"]"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),En=c("p",null,[l("采用 "),c("code",null,"random.sample"),l(" 这个可以在一组 list 中，随机获取指定数量的内容。 如果只是想选一个，可以使用 "),c("code",null,"random.choice")],-1),An=c("h2",{id:"pprint"},[c("a",{class:"header-anchor",href:"#pprint","aria-hidden":"true"},"#"),l(" pprint")],-1),Nn=c("p",null,"正常使用 print 的打印效果一般，不够 pretty， 所以我们可以使用 pprint 库来完成更好的打印，正常情况下我们会使用到一些基本的参数来控制打印的效果。同时可以通过自定义统一的打印风格。",-1),On=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(),c("span",{class:"token keyword"},"from"),l(" pprint "),c("span",{class:"token keyword"},"import"),l(" PrettyPrinter\n"),c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(" custom_printer "),c("span",{class:"token operator"},"="),l(" PrettyPrinter"),c("span",{class:"token punctuation"},"("),l("\n"),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),l("     indent"),c("span",{class:"token operator"},"="),c("span",{class:"token number"},"4"),c("span",{class:"token punctuation"},","),l("\n"),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),l("     width"),c("span",{class:"token operator"},"="),c("span",{class:"token number"},"100"),c("span",{class:"token punctuation"},","),l("\n"),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),l("     depth"),c("span",{class:"token operator"},"="),c("span",{class:"token number"},"2"),c("span",{class:"token punctuation"},","),l("\n"),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),l("     compact"),c("span",{class:"token operator"},"="),c("span",{class:"token boolean"},"True"),c("span",{class:"token punctuation"},","),l("\n"),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),l("     sort_dicts"),c("span",{class:"token operator"},"="),c("span",{class:"token boolean"},"False"),l("\n"),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),l(),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),l("\n"),c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(" user"),c("span",{class:"token operator"},"="),c("span",{class:"token punctuation"},"{"),c("span",{class:"token string"},'"name"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token string"},'"jesse"'),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},'"age"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token number"},"1"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},'"address"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token punctuation"},"{"),c("span",{class:"token string"},'"street"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token string"},'"xxx"'),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},'"city"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token string"},'"xxxxx"'),c("span",{class:"token punctuation"},"}"),c("span",{class:"token punctuation"},"}"),l("\n"),c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(" custom_printer"),c("span",{class:"token punctuation"},"."),l("pprint"),c("span",{class:"token punctuation"},"("),l("user"),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token punctuation"},"{"),c("span",{class:"token string"},"'name'"),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token string"},"'jesse'"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},"'age'"),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token number"},"1"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},"'address'"),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token punctuation"},"{"),c("span",{class:"token string"},"'street'"),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token string"},"'xxx'"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},"'city'"),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token string"},"'xxxxx'"),c("span",{class:"token punctuation"},"}"),c("span",{class:"token punctuation"},"}"),l("\n")])],-1),Rn=c("p",null,"实际上我们可以通过单独设置的方式来打印这些内容,比如：",-1),Un=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(),c("span",{class:"token keyword"},"from"),l(" pprint "),c("span",{class:"token keyword"},"import"),l(" pprint\n"),c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(" pprint"),c("span",{class:"token punctuation"},"("),l("users"),c("span",{class:"token punctuation"},","),l(" indent"),c("span",{class:"token operator"},"="),c("span",{class:"token number"},"4"),c("span",{class:"token punctuation"},","),l(" depth"),c("span",{class:"token operator"},"="),c("span",{class:"token number"},"2"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),Cn=c("h2",{id:"frozenset"},[c("a",{class:"header-anchor",href:"#frozenset","aria-hidden":"true"},"#"),l(),c("a",{href:"https://docs.python.org/3/library/stdtypes.html#frozenset",target:"_blank",rel:"noopener"},"frozenset")],-1),Gn=c("p",null,[l("众所周知，dict 是一个 mutable 的结构，所以我们无法像 set 一样对两个 dict 进行一些对比操作。还在 Python 提供了一个 "),c("code",null,"frozenset"),l(" 的内置函数可以用来将 dict 转换成一个 set 。这样我们便可以使用 set 的特性来进行 dict 的对比操作。")],-1),Ln=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(" dict_a "),c("span",{class:"token operator"},"="),l(),c("span",{class:"token punctuation"},"{"),c("span",{class:"token string"},'"Hello"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token string"},'"world"'),c("span",{class:"token punctuation"},"}"),l("\n"),c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(" dict_b "),c("span",{class:"token operator"},"="),l(),c("span",{class:"token punctuation"},"{"),c("span",{class:"token string"},'"hello"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token string"},'"world"'),c("span",{class:"token punctuation"},"}"),l("\n"),c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(),c("span",{class:"token builtin"},"frozenset"),c("span",{class:"token punctuation"},"("),l("dict_a"),c("span",{class:"token punctuation"},")"),l(),c("span",{class:"token operator"},"=="),l(),c("span",{class:"token builtin"},"frozenset"),c("span",{class:"token punctuation"},"("),l("dict_b"),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token boolean"},"False"),l("\n"),c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(),c("span",{class:"token builtin"},"frozenset"),c("span",{class:"token punctuation"},"("),l("dict_a"),c("span",{class:"token punctuation"},")"),l(),c("span",{class:"token operator"},"-"),l(),c("span",{class:"token builtin"},"frozenset"),c("span",{class:"token punctuation"},"("),l("dict_b"),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token builtin"},"frozenset"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},"{"),c("span",{class:"token string"},"'Hello'"),c("span",{class:"token punctuation"},"}"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),Wn=c("h2",{id:"dict"},[c("a",{class:"header-anchor",href:"#dict","aria-hidden":"true"},"#"),l(" dict")],-1),Kn=c("p",null,[l("正常情况下，我们对 dict 访问不存在的 key 时会报错 keyerror。 因此当我们想对不存在的 key 访问时，我们可以使用 "),c("code",null,"default"),l(" 参数来指定一个默认的返回值。")],-1),Zn=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(" d "),c("span",{class:"token operator"},"="),l(),c("span",{class:"token punctuation"},"{"),c("span",{class:"token string"},'"a"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token number"},"1"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},'"b"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token number"},"2"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},'"c"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token number"},"3"),c("span",{class:"token punctuation"},"}"),l("\n"),c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(" d"),c("span",{class:"token punctuation"},"."),l("get"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},"'d'"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token number"},"4"),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token number"},"4"),l("\n")])],-1),Jn=c("p",null,[l("此外，我们还可以通过 "),c("code",null,"defaultdict"),l(" 来统一配置默认的返回值。")],-1),Mn=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(),c("span",{class:"token keyword"},"from"),l(" collections "),c("span",{class:"token keyword"},"import"),l(" defaultdict\n"),c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(" d "),c("span",{class:"token operator"},"="),l(),c("span",{class:"token punctuation"},"{"),c("span",{class:"token string"},'"a"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token number"},"1"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},'"b"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token number"},"2"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},'"c"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token number"},"3"),c("span",{class:"token punctuation"},"}"),l("\n"),c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(" d "),c("span",{class:"token operator"},"="),l(" defaultdict"),c("span",{class:"token punctuation"},"("),c("span",{class:"token keyword"},"lambda"),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token boolean"},"None"),c("span",{class:"token punctuation"},","),l(" d"),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(" d"),c("span",{class:"token punctuation"},"["),c("span",{class:"token string"},'"a"'),c("span",{class:"token punctuation"},"]"),l("\n"),c("span",{class:"token number"},"1"),l("\n"),c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(),c("span",{class:"token keyword"},"print"),c("span",{class:"token punctuation"},"("),l("d"),c("span",{class:"token punctuation"},"["),c("span",{class:"token string"},'"d"'),c("span",{class:"token punctuation"},"]"),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token boolean"},"None"),l("\n")])],-1),Yn=c("p",null,[l("当我们需要批量获取指定的 key 的值，可以通过 "),c("code",null,"itemgetter"),l(" 来完成，比如：")],-1),Qn=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(),c("span",{class:"token keyword"},"from"),l(" operator "),c("span",{class:"token keyword"},"import"),l(" itemgetter\n"),c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(" d "),c("span",{class:"token operator"},"="),l(),c("span",{class:"token punctuation"},"{"),c("span",{class:"token string"},'"a"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token number"},"1"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},'"b"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token number"},"2"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},'"c"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token number"},"3"),c("span",{class:"token punctuation"},"}"),l("\n"),c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(" items "),c("span",{class:"token operator"},"="),l(),c("span",{class:"token punctuation"},"["),c("span",{class:"token string"},"'a'"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},"'b'"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},"'c'"),c("span",{class:"token punctuation"},"]"),l("\n"),c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(" a"),c("span",{class:"token punctuation"},","),l(" b"),c("span",{class:"token punctuation"},","),l(" c "),c("span",{class:"token operator"},"="),l(" itemgetter"),c("span",{class:"token punctuation"},"("),c("span",{class:"token operator"},"*"),l("items"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},"("),l("d"),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token operator"},">>"),c("span",{class:"token operator"},">"),l(" a"),c("span",{class:"token punctuation"},","),l(" b"),c("span",{class:"token punctuation"},","),l(" c\n"),c("span",{class:"token punctuation"},"("),c("span",{class:"token number"},"1"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token number"},"2"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token number"},"3"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),Vn=c("h2",{id:"json"},[c("a",{class:"header-anchor",href:"#json","aria-hidden":"true"},"#"),l(" json")],-1),Xn=c("p",null,[l("在处理 json load 时，提供了两个 hook 接口，一个是 "),c("code",null,"object_pairs_hook"),l(" ，另一个是 "),c("code",null,"object_hook"),l("，这两个函数中均可对期望的字段或者内容进行相应的处理。其中 "),c("code",null,"object_pairs_hook"),l(" 的优先级更高一些。 这两者的差别在于函数的入参。"),c("code",null,"object_hook"),l(" 的入参是一个 dict ，而 "),c("code",null,"object_pairs_hook"),l(" 的入参是一个 list ，其中每一个元素都是一个 tuple ，第一个元素是 key ，第二个元素是 value 。")],-1),ns=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"import"),l(" json\n\njson"),c("span",{class:"token punctuation"},"."),l("loads"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},'\'{"foo": "bar"}\''),c("span",{class:"token punctuation"},","),l(" object_pairs_hook"),c("span",{class:"token operator"},"="),c("span",{class:"token keyword"},"print"),c("span",{class:"token punctuation"},")"),l("\njson"),c("span",{class:"token punctuation"},"."),l("loads"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},'\'{"foo": "bar"}\''),c("span",{class:"token punctuation"},","),l(" object_hook"),c("span",{class:"token operator"},"="),c("span",{class:"token keyword"},"print"),c("span",{class:"token punctuation"},")"),l("\n\n"),c("span",{class:"token comment"},"# [('foo', 'bar')]"),l("\n"),c("span",{class:"token comment"},"# {'foo': 'bar'}"),l("\n")])],-1),ss=c("h2",{id:"textwrap-dedent"},[c("a",{class:"header-anchor",href:"#textwrap-dedent","aria-hidden":"true"},"#"),l(" textwrap.dedent")],-1),as=c("p",null,"在使用多行文本编辑时，我们可能会使用到 textwrap.dedent 函数，它可以将多行文本的缩进去掉。 否则，就会按照实际填写的锁进原样输出。比如下面的例子。",-1),ts=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"import"),l(" textwrap\n\ntext "),c("span",{class:"token operator"},"="),l(),c("span",{class:"token triple-quoted-string string"},'"""\n    int main(int argc, char **argv) {\n        print("hello world");\n    }\n"""'),l("\n\n"),c("span",{class:"token keyword"},"print"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},'"---"'),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token keyword"},"print"),c("span",{class:"token punctuation"},"("),l("text"),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token keyword"},"print"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},'"---"'),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token keyword"},"print"),c("span",{class:"token punctuation"},"("),l("textwrap"),c("span",{class:"token punctuation"},"."),l("dedent"),c("span",{class:"token punctuation"},"("),l("text"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token keyword"},"print"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},'"---"'),c("span",{class:"token punctuation"},")"),l("\n")])],-1),os=c("p",null,"运行后我们可以看到如下的输出：",-1),es=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token operator"},"-"),c("span",{class:"token operator"},"-"),c("span",{class:"token operator"},"-"),l("\n\n    "),c("span",{class:"token builtin"},"int"),l(" main"),c("span",{class:"token punctuation"},"("),c("span",{class:"token builtin"},"int"),l(" argc"),c("span",{class:"token punctuation"},","),l(" char "),c("span",{class:"token operator"},"**"),l("argv"),c("span",{class:"token punctuation"},")"),l(),c("span",{class:"token punctuation"},"{"),l("\n        "),c("span",{class:"token keyword"},"print"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},'"hello world"'),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},";"),l("\n    "),c("span",{class:"token punctuation"},"}"),l("\n\n"),c("span",{class:"token operator"},"-"),c("span",{class:"token operator"},"-"),c("span",{class:"token operator"},"-"),l("\n\n"),c("span",{class:"token builtin"},"int"),l(" main"),c("span",{class:"token punctuation"},"("),c("span",{class:"token builtin"},"int"),l(" argc"),c("span",{class:"token punctuation"},","),l(" char "),c("span",{class:"token operator"},"**"),l("argv"),c("span",{class:"token punctuation"},")"),l(),c("span",{class:"token punctuation"},"{"),l("\n    "),c("span",{class:"token keyword"},"print"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},'"hello world"'),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},";"),l("\n"),c("span",{class:"token punctuation"},"}"),l("\n\n"),c("span",{class:"token operator"},"-"),c("span",{class:"token operator"},"-"),c("span",{class:"token operator"},"-"),l("\n")])],-1),ps=c("h2",{id:"bytes-转-str-编码"},[c("a",{class:"header-anchor",href:"#bytes-转-str-编码","aria-hidden":"true"},"#"),l(" bytes 转 str 编码")],-1),cs=c("p",null,"Python3 中有两种方式进行转换",-1),ls=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[l("encoding "),c("span",{class:"token operator"},"="),l(),c("span",{class:"token string"},"'utf-8'"),l("\n"),c("span",{class:"token string"},"b'hello'"),c("span",{class:"token punctuation"},"."),l("decode"),c("span",{class:"token punctuation"},"("),l("encoding"),c("span",{class:"token punctuation"},")"),l("\n\n"),c("span",{class:"token operator"},"-"),c("span",{class:"token operator"},"-"),c("span",{class:"token operator"},"-"),l("\n\n"),c("span",{class:"token builtin"},"str"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},"b'hello'"),c("span",{class:"token punctuation"},","),l(" encoding"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),us=c("h2",{id:"remove-suffix"},[c("a",{class:"header-anchor",href:"#remove-suffix","aria-hidden":"true"},"#"),l(" remove suffix")],-1),is=c("p",null,[l("在 python 3.9+ 可以直接使用 "),c("code",null,"removesuffix"),l(" 等函数，在比较低的版本上，我们可以使用如下的函数进行替换。")],-1),rs=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"def"),l(),c("span",{class:"token function"},"remove_suffix"),c("span",{class:"token punctuation"},"("),l("text"),c("span",{class:"token punctuation"},","),l(" suffix"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},":"),l(" \n    "),c("span",{class:"token keyword"},"return"),l(" text"),c("span",{class:"token punctuation"},"["),c("span",{class:"token punctuation"},":"),c("span",{class:"token operator"},"-"),c("span",{class:"token builtin"},"len"),c("span",{class:"token punctuation"},"("),l("suffix"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},"]"),l(),c("span",{class:"token keyword"},"if"),l(" text"),c("span",{class:"token punctuation"},"."),l("endswith"),c("span",{class:"token punctuation"},"("),l("suffix"),c("span",{class:"token punctuation"},")"),l(),c("span",{class:"token keyword"},"and"),l(),c("span",{class:"token builtin"},"len"),c("span",{class:"token punctuation"},"("),l("suffix"),c("span",{class:"token punctuation"},")"),l(),c("span",{class:"token operator"},"!="),l(),c("span",{class:"token number"},"0"),l(),c("span",{class:"token keyword"},"else"),l(" text\n")])],-1),ks=c("h2",{id:"使用-requests-传递-formdata"},[c("a",{class:"header-anchor",href:"#使用-requests-传递-formdata","aria-hidden":"true"},"#"),l(" 使用 Requests 传递 formdata")],-1),ds=c("p",null,[l("需要使用到 urllib3 的相关函数。 "),c("a",{href:"https://urllib3.readthedocs.io/en/1.26.4/reference/urllib3.fields.html#urllib3.encode_multipart_formdata",target:"_blank",rel:"noopener"},"相关文档")],-1),gs=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"import"),l(" json\n"),c("span",{class:"token keyword"},"import"),l(" requests\n\n"),c("span",{class:"token keyword"},"from"),l(" ulrlib3 "),c("span",{class:"token keyword"},"import"),l(" encode_multipart_formdata\n\npayload "),c("span",{class:"token operator"},"="),l(),c("span",{class:"token punctuation"},"{"),l("\n        "),c("span",{class:"token string"},'"name"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token punctuation"},"("),c("span",{class:"token boolean"},"None"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},'"xxx"'),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},","),l("\n        "),c("span",{class:"token string"},'"args"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token punctuation"},"("),c("span",{class:"token boolean"},"None"),c("span",{class:"token punctuation"},","),l(" json"),c("span",{class:"token punctuation"},"."),l("dumps"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},"{"),l("\n            "),c("span",{class:"token string"},'"xxx"'),c("span",{class:"token punctuation"},":"),c("span",{class:"token number"},"2"),c("span",{class:"token punctuation"},","),l("\n            "),c("span",{class:"token string"},'"xxx"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token string"},"'xxx'"),c("span",{class:"token punctuation"},","),l("\n            "),c("span",{class:"token string"},'"xxx"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token boolean"},"False"),l("\n        "),c("span",{class:"token punctuation"},"}"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},","),l("\n        "),c("span",{class:"token string"},'"smiles"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token punctuation"},"("),c("span",{class:"token boolean"},"None"),c("span",{class:"token punctuation"},","),l(" json"),c("span",{class:"token punctuation"},"."),l("dumps"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},"["),c("span",{class:"token string"},"'xxx'"),c("span",{class:"token punctuation"},","),c("span",{class:"token string"},"'xxxx'"),c("span",{class:"token punctuation"},"]"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},","),l("\n        "),c("span",{class:"token string"},'"file"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},'"filename"'),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token builtin"},"open"),c("span",{class:"token punctuation"},"("),l("filename"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},"."),l("read"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token punctuation"},"}"),l("\n\nbody"),c("span",{class:"token punctuation"},","),l(" header_option "),c("span",{class:"token operator"},"="),l(" encode_multipart_formdata"),c("span",{class:"token punctuation"},"("),l("payload"),c("span",{class:"token punctuation"},")"),l("\nheaders"),c("span",{class:"token punctuation"},"["),c("span",{class:"token string"},"'Content-Type'"),c("span",{class:"token punctuation"},"]"),l(),c("span",{class:"token operator"},"="),l(" header_option\n\nurl "),c("span",{class:"token operator"},"="),l(),c("span",{class:"token string"},"'xxxx'"),l("\nresp "),c("span",{class:"token operator"},"="),l(" requests"),c("span",{class:"token punctuation"},"."),l("request"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},'"POST"'),c("span",{class:"token punctuation"},","),l(" url"),c("span",{class:"token punctuation"},","),l(" data"),c("span",{class:"token operator"},"="),l("body"),c("span",{class:"token punctuation"},","),l(" headers"),c("span",{class:"token operator"},"="),l("headers"),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token keyword"},"print"),c("span",{class:"token punctuation"},"("),l("resp"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),hs=c("h2",{id:"统计代码运行时间"},[c("a",{class:"header-anchor",href:"#统计代码运行时间","aria-hidden":"true"},"#"),l(" 统计代码运行时间")],-1),ms=c("ul",null,[c("li",null,"time 模块")],-1),ys=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"import"),l(" time\n\nt1 "),c("span",{class:"token operator"},"="),l(" time"),c("span",{class:"token punctuation"},"."),l("time"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),l("\nt2 "),c("span",{class:"token operator"},"="),l(" time"),c("span",{class:"token punctuation"},"."),l("time"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),l("\n\nelapse "),c("span",{class:"token operator"},"="),l(" t2"),c("span",{class:"token operator"},"-"),l("t1\n")])],-1),fs=c("ul",null,[c("li",null,"timeit 模块")],-1),bs=c("p",null,[c("strong",null,"timer")],-1),ws=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"from"),l(" timeit "),c("span",{class:"token keyword"},"import"),l(" default_timer "),c("span",{class:"token keyword"},"as"),l(" timer\n\nt1 "),c("span",{class:"token operator"},"="),l(" timer"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),l("\nt2 "),c("span",{class:"token operator"},"="),l(" timer"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),l("\nelapse "),c("span",{class:"token operator"},"="),l(" t2 "),c("span",{class:"token operator"},"-"),l(" t1\n")])],-1),xs=c("p",null,[c("strong",null,"命令行")],-1),_s=c("pre",{class:"language-bash"},[c("code",{class:"language-bash"},[l("$ python -m timeit "),c("span",{class:"token string"},"'\"-\".join(str(n) for n in range(100))'"),l("\n")])],-1),vs=c("p",null,[c("strong",null,"代码")],-1),zs=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"import"),l(" timeit\n\ntimeit"),c("span",{class:"token punctuation"},"."),l("timeit"),c("span",{class:"token punctuation"},"("),c("span",{class:"token keyword"},"lambda"),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token string"},'"-"'),c("span",{class:"token punctuation"},"."),l("join"),c("span",{class:"token punctuation"},"("),c("span",{class:"token builtin"},"map"),c("span",{class:"token punctuation"},"("),c("span",{class:"token builtin"},"str"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token builtin"},"range"),c("span",{class:"token punctuation"},"("),c("span",{class:"token number"},"100"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},","),l(" number"),c("span",{class:"token operator"},"="),c("span",{class:"token number"},"1000"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),js=c("p",null,[c("strong",null,"装饰器")],-1),qs=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"from"),l(" timeit "),c("span",{class:"token keyword"},"import"),l(" default_timer "),c("span",{class:"token keyword"},"as"),l(" timer\n\n"),c("span",{class:"token keyword"},"def"),l(),c("span",{class:"token function"},"timer_func"),c("span",{class:"token punctuation"},"("),l("func"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},":"),l("\n    "),c("span",{class:"token keyword"},"def"),l(),c("span",{class:"token function"},"wrapper"),c("span",{class:"token punctuation"},"("),c("span",{class:"token operator"},"*"),l("args"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token operator"},"**"),l("kwargs"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},":"),l("\n        t1 "),c("span",{class:"token operator"},"="),l(" timer"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),l("\n        result "),c("span",{class:"token operator"},"="),l(" func"),c("span",{class:"token punctuation"},"("),c("span",{class:"token operator"},"*"),l("args"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token operator"},"**"),l("kwargs"),c("span",{class:"token punctuation"},")"),l("\n        t2 "),c("span",{class:"token operator"},"="),l(" timer"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),l("\n        "),c("span",{class:"token keyword"},"print"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string-interpolation"},[c("span",{class:"token string"},"f'"),c("span",{class:"token interpolation"},[c("span",{class:"token punctuation"},"{"),l("func"),c("span",{class:"token punctuation"},"."),l("__name__"),c("span",{class:"token punctuation"},"}")]),c("span",{class:"token string"},"() executed in "),c("span",{class:"token interpolation"},[c("span",{class:"token punctuation"},"{"),c("span",{class:"token punctuation"},"("),l("t2"),c("span",{class:"token operator"},"-"),l("t1"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},":"),c("span",{class:"token format-spec"},".6f"),c("span",{class:"token punctuation"},"}")]),c("span",{class:"token string"},"s'")]),c("span",{class:"token punctuation"},")"),l("\n        "),c("span",{class:"token keyword"},"return"),l(" result\n    "),c("span",{class:"token keyword"},"return"),l(" wrapper\n\n"),c("span",{class:"token decorator annotation punctuation"},"@timer_func"),l("\n"),c("span",{class:"token keyword"},"def"),l(),c("span",{class:"token function"},"my_func"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},":"),l("\n    "),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),l("\n")])],-1),Ps=c("h2",{id:"short-unique-random-string"},[c("a",{class:"header-anchor",href:"#short-unique-random-string","aria-hidden":"true"},"#"),l(" short unique random string")],-1),Ts=c("p",null,"我们可以通过比较通用的方式来生成随机的字符串。",-1),Ds=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"import"),l(" random\n"),c("span",{class:"token keyword"},"import"),l(" shortuuid\n"),c("span",{class:"token keyword"},"import"),l(" uuid\n\nalphabet "),c("span",{class:"token operator"},"="),l(" string"),c("span",{class:"token punctuation"},"."),l("ascii_lowercase "),c("span",{class:"token operator"},"+"),l(" string"),c("span",{class:"token punctuation"},"."),l("digits\nsu "),c("span",{class:"token operator"},"="),l(" shortuuid"),c("span",{class:"token punctuation"},"."),l("ShortUUID"),c("span",{class:"token punctuation"},"("),l("alphabet"),c("span",{class:"token operator"},"="),l("alphabet"),c("span",{class:"token punctuation"},")"),l("\n\n"),c("span",{class:"token keyword"},"def"),l(),c("span",{class:"token function"},"random_choice"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},":"),l("\n    "),c("span",{class:"token keyword"},"return"),l(),c("span",{class:"token string"},"''"),c("span",{class:"token punctuation"},"."),l("join"),c("span",{class:"token punctuation"},"("),l("random"),c("span",{class:"token punctuation"},"."),l("choices"),c("span",{class:"token punctuation"},"("),l("alphabet"),c("span",{class:"token punctuation"},","),l(" k"),c("span",{class:"token operator"},"="),c("span",{class:"token number"},"8"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},")"),l("\n\n"),c("span",{class:"token keyword"},"def"),l(),c("span",{class:"token function"},"truncated_uuid4"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},":"),l("\n    "),c("span",{class:"token keyword"},"return"),l(),c("span",{class:"token builtin"},"str"),c("span",{class:"token punctuation"},"("),l("uuid"),c("span",{class:"token punctuation"},"."),l("uuid4"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},"["),c("span",{class:"token punctuation"},":"),c("span",{class:"token number"},"8"),c("span",{class:"token punctuation"},"]"),l("\n\n"),c("span",{class:"token keyword"},"def"),l(),c("span",{class:"token function"},"shortuuid_random"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},":"),l("\n    "),c("span",{class:"token keyword"},"return"),l(" su"),c("span",{class:"token punctuation"},"."),l("random"),c("span",{class:"token punctuation"},"("),l("length"),c("span",{class:"token operator"},"="),c("span",{class:"token number"},"8"),c("span",{class:"token punctuation"},")"),l("\n\n"),c("span",{class:"token keyword"},"def"),l(),c("span",{class:"token function"},"secrets_random_choice"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},":"),l("\n    "),c("span",{class:"token keyword"},"return"),l(),c("span",{class:"token string"},"''"),c("span",{class:"token punctuation"},"."),l("join"),c("span",{class:"token punctuation"},"("),l("secrets"),c("span",{class:"token punctuation"},"."),l("choice"),c("span",{class:"token punctuation"},"("),l("alphabet"),c("span",{class:"token punctuation"},")"),l(),c("span",{class:"token keyword"},"for"),l(" _ "),c("span",{class:"token keyword"},"in"),l(),c("span",{class:"token builtin"},"range"),c("span",{class:"token punctuation"},"("),c("span",{class:"token number"},"8"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),Fs=c("p",null,[l("其中最快的是 "),c("code",null,"random_choice"),l(" ，且无过多的依赖。")],-1),Hs=c("h2",{id:"csv"},[c("a",{class:"header-anchor",href:"#csv","aria-hidden":"true"},"#"),l(" csv")],-1),$s=c("p",null,"当我们在开发一个通用工具时，可能会遇到不同平台或者不同工具生成的 csv 文件，这是我们需要考虑的问题，好在 csv 库提供了一些方法，让我们可以方便的去判断。",-1),Is=c("p",null,[c("strong",null,"Sniff")],-1),Ss=c("p",null,[l("该类提供了两个 handy 的方法，"),c("code",null,"sniff"),l(" 用于来测试当前文件的使用的 "),c("code",null,"dialect"),l("。这个主要是给 reader 和 writer 函数使用的。")],-1),Bs=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"import"),l(" csv \nbuffered "),c("span",{class:"token operator"},"="),l(" io"),c("span",{class:"token punctuation"},"."),l("BufferedReader"),c("span",{class:"token punctuation"},"("),l("cast"),c("span",{class:"token punctuation"},"("),l("io"),c("span",{class:"token punctuation"},"."),l("RawIOBase"),c("span",{class:"token punctuation"},","),l(" fp"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},","),l(" buffer_size"),c("span",{class:"token operator"},"="),c("span",{class:"token number"},"4096"),c("span",{class:"token punctuation"},")"),l("\nfirst_bytes "),c("span",{class:"token operator"},"="),l(" buffered"),c("span",{class:"token punctuation"},"."),l("peek"),c("span",{class:"token punctuation"},"("),c("span",{class:"token number"},"2048"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},"."),l("strip"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),l("\ndialect "),c("span",{class:"token operator"},"="),l(" csv"),c("span",{class:"token punctuation"},"."),l("Sniffer"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},"."),l("sniff"),c("span",{class:"token punctuation"},"("),l("\n    first_bytes"),c("span",{class:"token punctuation"},"."),l("decode"),c("span",{class:"token punctuation"},"("),l("encoding "),c("span",{class:"token keyword"},"or"),l(),c("span",{class:"token string"},'"utf-8-sig"'),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},'"ignore"'),c("span",{class:"token punctuation"},")"),l("\n"),c("span",{class:"token punctuation"},")"),l("\n\n"),c("span",{class:"token comment"},"# then"),l("\ncsv"),c("span",{class:"token punctuation"},"."),l("DictReader"),c("span",{class:"token punctuation"},"("),l("decoded_fp"),c("span",{class:"token punctuation"},","),l(" dialect"),c("span",{class:"token operator"},"="),l("dialect"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),Es=c("p",null,"此外，如果我们清楚是那种 dialect 时，csv 库提供了几个定义好的 dialect。包括：",-1),As=c("ul",null,[c("li",null,"csv.excel"),c("li",null,"csv.excel_tab"),c("li",null,"csv.unix_dialect")],-1),Ns=c("p",null,[l("也可以通过自定义的方式来定义一个新的 dialect。 使用 "),c("code",null,"list_dialects()"),l(" 获取当前的所有的 dialect。")],-1),Os=c("p",null,[l("另外一个方法是 "),c("code",null,"has_header"),l("，用来通过经验判断当前的 csv 是否包含一个 header。")],-1),Rs=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"import"),l(" csv\n\nhas_header "),c("span",{class:"token operator"},"="),l(" csv"),c("span",{class:"token punctuation"},"."),l("Sniffer"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},"."),l("has_header"),c("span",{class:"token punctuation"},"("),l("fd"),c("span",{class:"token punctuation"},"."),l("read"),c("span",{class:"token punctuation"},"("),c("span",{class:"token number"},"2048"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},")"),l("\nfd"),c("span",{class:"token punctuation"},"."),l("seek"),c("span",{class:"token punctuation"},"("),c("span",{class:"token number"},"0"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),Us=c("p",null,[c("strong",null,"field_size_limit")],-1),Cs=c("p",null,[l("csv 文件可能会存在非常多的列，在 csv 的库中，我们可以通过 "),c("code",null,"field_size_limit"),l(" 来设置最大的列的信息。可以使用如下方式：")],-1),Gs=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"import"),l(" csv\n"),c("span",{class:"token keyword"},"import"),l(" sys\n\nraw_size_back "),c("span",{class:"token operator"},"="),l(" csv"),c("span",{class:"token punctuation"},"."),l("field_size_limit"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),l("\nmaxInt "),c("span",{class:"token operator"},"="),l(" sys"),c("span",{class:"token punctuation"},"."),l("maxsize\n\n"),c("span",{class:"token keyword"},"while"),l(),c("span",{class:"token boolean"},"True"),c("span",{class:"token punctuation"},":"),l("\n    "),c("span",{class:"token keyword"},"try"),c("span",{class:"token punctuation"},":"),l("\n        csv"),c("span",{class:"token punctuation"},"."),l("field_size_limit"),c("span",{class:"token punctuation"},"("),l("maxInt"),c("span",{class:"token punctuation"},")"),l("\n        "),c("span",{class:"token keyword"},"break"),l("\n    "),c("span",{class:"token keyword"},"except"),l(" OverflowError"),c("span",{class:"token punctuation"},":"),l("\n        maxInt "),c("span",{class:"token operator"},"="),l(),c("span",{class:"token builtin"},"int"),c("span",{class:"token punctuation"},"("),l("maxInt"),c("span",{class:"token operator"},"/"),c("span",{class:"token number"},"10"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),Ls=l(" _csv.Error: field larger than field limit (131072) "),Ws=c("h2",{id:"change-dir"},[c("a",{class:"header-anchor",href:"#change-dir","aria-hidden":"true"},"#"),l(" change dir")],-1),Ks=c("p",null,[l("我们在 python 中要切换目录，可以使用 "),c("code",null,"os.chdir"),l(", 更好的一个做法是使用使用 contextmanager")],-1),Zs=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"from"),l(" contextlib "),c("span",{class:"token keyword"},"import"),l(" contextmanager\n"),c("span",{class:"token keyword"},"from"),l(" pathlib "),c("span",{class:"token keyword"},"import"),l(" Path\n\n"),c("span",{class:"token keyword"},"import"),l(" os\n\n"),c("span",{class:"token decorator annotation punctuation"},"@contextmanager"),l("\n"),c("span",{class:"token keyword"},"def"),l(),c("span",{class:"token function"},"change_directory"),c("span",{class:"token punctuation"},"("),l("path"),c("span",{class:"token punctuation"},":"),l(" Path"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},":"),l("\n    origin "),c("span",{class:"token operator"},"="),l(" Path"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},"."),l("absolute"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),l("\n    "),c("span",{class:"token keyword"},"try"),c("span",{class:"token punctuation"},":"),l("\n        os"),c("span",{class:"token punctuation"},"."),l("chdir"),c("span",{class:"token punctuation"},"("),l("path"),c("span",{class:"token punctuation"},")"),l("\n        "),c("span",{class:"token keyword"},"yield"),l("\n    "),c("span",{class:"token keyword"},"finally"),c("span",{class:"token punctuation"},":"),l("\n        os"),c("span",{class:"token punctuation"},"."),l("chdir"),c("span",{class:"token punctuation"},"("),l("origin"),c("span",{class:"token punctuation"},")"),l("\n\n"),c("span",{class:"token keyword"},"with"),l(" change_directory"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},"'jsme'"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},":"),l("\n    "),c("span",{class:"token keyword"},"print"),c("span",{class:"token punctuation"},"("),l("Path"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},"."),l("absolute"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),Js=c("h2",{id:"explicitly-ignore-error"},[c("a",{class:"header-anchor",href:"#explicitly-ignore-error","aria-hidden":"true"},"#"),l(" explicitly ignore error")],-1),Ms=c("p",null,"除了常规的 try catch 去处理，我们还可以使用 contextlib 去简单的实现：",-1),Ys=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"import"),l(" os\n"),c("span",{class:"token keyword"},"from"),l(" contextlib "),c("span",{class:"token keyword"},"import"),l(" suppress\n\n"),c("span",{class:"token keyword"},"with"),l(" suppress"),c("span",{class:"token punctuation"},"("),l("FileNotFoundError"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},":"),l("\n    os"),c("span",{class:"token punctuation"},"."),l("remove"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},"'somefile.tmp'"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),Qs=c("h2",{id:"logging-support"},[c("a",{class:"header-anchor",href:"#logging-support","aria-hidden":"true"},"#"),l(" logging support")],-1),Vs=c("p",null,"with structlog support, 可以设置成如下的方式，该方式可以重定向日志到文件。",-1),Xs=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"import"),l(" logging"),c("span",{class:"token punctuation"},"."),l("config\n"),c("span",{class:"token keyword"},"import"),l(" structlog\n\ntimestamper "),c("span",{class:"token operator"},"="),l(" structlog"),c("span",{class:"token punctuation"},"."),l("processors"),c("span",{class:"token punctuation"},"."),l("TimeStamper"),c("span",{class:"token punctuation"},"("),l("fmt"),c("span",{class:"token operator"},"="),c("span",{class:"token string"},'"iso"'),c("span",{class:"token punctuation"},")"),l("\nlogging"),c("span",{class:"token punctuation"},"."),l("config"),c("span",{class:"token punctuation"},"."),l("dictConfig"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},"{"),l("\n        "),c("span",{class:"token string"},'"version"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token number"},"1"),c("span",{class:"token punctuation"},","),l("\n        "),c("span",{class:"token string"},'"disable_existing_loggers"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token boolean"},"False"),c("span",{class:"token punctuation"},","),l("\n        "),c("span",{class:"token string"},'"handlers"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token punctuation"},"{"),l("\n            "),c("span",{class:"token string"},'"default"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token punctuation"},"{"),l("\n                "),c("span",{class:"token string"},'"level"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token string"},'"DEBUG"'),c("span",{class:"token punctuation"},","),l("\n                "),c("span",{class:"token string"},'"class"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token string"},'"logging.StreamHandler"'),c("span",{class:"token punctuation"},","),l("\n            "),c("span",{class:"token punctuation"},"}"),c("span",{class:"token punctuation"},","),l("\n            "),c("span",{class:"token string"},'"file"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token punctuation"},"{"),l("\n                "),c("span",{class:"token string"},'"level"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token string"},'"DEBUG"'),c("span",{class:"token punctuation"},","),l("\n                "),c("span",{class:"token string"},'"class"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token string"},'"logging.handlers.WatchedFileHandler"'),c("span",{class:"token punctuation"},","),l("\n                "),c("span",{class:"token string"},'"filename"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token string"},'"test.log"'),c("span",{class:"token punctuation"},","),l("\n            "),c("span",{class:"token punctuation"},"}"),c("span",{class:"token punctuation"},","),l("\n        "),c("span",{class:"token punctuation"},"}"),c("span",{class:"token punctuation"},","),l("\n        "),c("span",{class:"token string"},'"loggers"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token punctuation"},"{"),l("\n            "),c("span",{class:"token string"},'""'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token punctuation"},"{"),l("\n                "),c("span",{class:"token string"},'"handlers"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token punctuation"},"["),c("span",{class:"token string"},'"default"'),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},'"file"'),c("span",{class:"token punctuation"},"]"),c("span",{class:"token punctuation"},","),l("\n                "),c("span",{class:"token string"},'"level"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token string"},'"DEBUG"'),c("span",{class:"token punctuation"},","),l("\n                "),c("span",{class:"token string"},'"propagate"'),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token boolean"},"True"),c("span",{class:"token punctuation"},","),l("\n            "),c("span",{class:"token punctuation"},"}"),c("span",{class:"token punctuation"},","),l("\n        "),c("span",{class:"token punctuation"},"}"),l("\n"),c("span",{class:"token punctuation"},"}"),c("span",{class:"token punctuation"},")"),l("\nstructlog"),c("span",{class:"token punctuation"},"."),l("configure"),c("span",{class:"token punctuation"},"("),l("\n    processors"),c("span",{class:"token operator"},"="),c("span",{class:"token punctuation"},"["),l("\n        structlog"),c("span",{class:"token punctuation"},"."),l("stdlib"),c("span",{class:"token punctuation"},"."),l("add_log_level"),c("span",{class:"token punctuation"},","),l("\n        structlog"),c("span",{class:"token punctuation"},"."),l("stdlib"),c("span",{class:"token punctuation"},"."),l("PositionalArgumentsFormatter"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},","),l("\n        timestamper"),c("span",{class:"token punctuation"},","),l("\n        structlog"),c("span",{class:"token punctuation"},"."),l("processors"),c("span",{class:"token punctuation"},"."),l("StackInfoRenderer"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},","),l("\n        structlog"),c("span",{class:"token punctuation"},"."),l("processors"),c("span",{class:"token punctuation"},"."),l("format_exc_info"),c("span",{class:"token punctuation"},","),l("\n        structlog"),c("span",{class:"token punctuation"},"."),l("stdlib"),c("span",{class:"token punctuation"},"."),l("ProcessorFormatter"),c("span",{class:"token punctuation"},"."),l("wrap_for_formatter"),c("span",{class:"token punctuation"},","),l("\n    "),c("span",{class:"token punctuation"},"]"),c("span",{class:"token punctuation"},","),l("\n    logger_factory"),c("span",{class:"token operator"},"="),l("structlog"),c("span",{class:"token punctuation"},"."),l("stdlib"),c("span",{class:"token punctuation"},"."),l("LoggerFactory"),c("span",{class:"token punctuation"},"("),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},","),l("\n    wrapper_class"),c("span",{class:"token operator"},"="),l("structlog"),c("span",{class:"token punctuation"},"."),l("stdlib"),c("span",{class:"token punctuation"},"."),l("BoundLogger"),c("span",{class:"token punctuation"},","),l("\n    cache_logger_on_first_use"),c("span",{class:"token operator"},"="),c("span",{class:"token boolean"},"True"),c("span",{class:"token punctuation"},","),l("\n"),c("span",{class:"token punctuation"},")"),l("\nstructlog"),c("span",{class:"token punctuation"},"."),l("get_logger"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},'"test"'),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},"."),l("info"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},'"hello"'),c("span",{class:"token punctuation"},")"),l("\n")])],-1),na=c("h3",{id:"args-and-kwargs-的类型标注"},[c("a",{class:"header-anchor",href:"#args-and-kwargs-的类型标注","aria-hidden":"true"},"#"),l(" args and kwargs 的类型标注")],-1),sa=c("p",null,"Arbitrary argument lists can as well be type annotated, so that the definition:",-1),aa=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[c("span",{class:"token keyword"},"def"),l(),c("span",{class:"token function"},"foo"),c("span",{class:"token punctuation"},"("),c("span",{class:"token operator"},"*"),l("args"),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token builtin"},"str"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token operator"},"**"),l("kwds"),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token builtin"},"int"),c("span",{class:"token punctuation"},")"),c("span",{class:"token punctuation"},":"),l(),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),c("span",{class:"token punctuation"},"."),l("\n")])],-1),ta=c("p",null,"is acceptable and it means that, e.g., all of the following represent function calls with valid types of arguments:",-1),oa=c("pre",{class:"language-python"},[c("code",{class:"language-python"},[l("foo"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},"'a'"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},"'b'"),c("span",{class:"token punctuation"},","),l(),c("span",{class:"token string"},"'c'"),c("span",{class:"token punctuation"},")"),l("\nfoo"),c("span",{class:"token punctuation"},"("),l("x"),c("span",{class:"token operator"},"="),c("span",{class:"token number"},"1"),c("span",{class:"token punctuation"},","),l(" y"),c("span",{class:"token operator"},"="),c("span",{class:"token number"},"2"),c("span",{class:"token punctuation"},")"),l("\nfoo"),c("span",{class:"token punctuation"},"("),c("span",{class:"token string"},"''"),c("span",{class:"token punctuation"},","),l(" z"),c("span",{class:"token operator"},"="),c("span",{class:"token number"},"0"),c("span",{class:"token punctuation"},")"),l("\n")])],-1),ea=c("p",null,"In the body of function foo, the type of variable args is deduced as Tuple[str, …] and the type of variable kwds is Dict[str, int].",-1),pa={expose:[],setup(l){const pa={title:"Python Hard Way",date:"2021-01-21T00:00:00.000Z",author:"Linkang Chan",twitter:"JessEisen_LJ",description:"python docs",public:!0,tag:"21B07 python",meta:[{property:"og:title",content:"Python Hard Way"},{property:"og:description",content:"python docs"},{name:"description",content:"python docs"}]};return t({title:"Python Hard Way",meta:[{property:"og:title",content:"Python Hard Way"},{property:"og:description",content:"python docs"},{name:"description",content:"python docs"}]}),(t,l)=>{const ca=n,la=s,ua=a;return o(),e(ua,{frontmatter:pa},{default:p((()=>[c("div",null,[u,i,r,k,d,g,h,m,y,f,b,c("p",null,[c(ca,{text:"Asterisks in Python",url:"https://treyhunner.com/2018/10/asterisks-in-python-what-they-are-and-how-to-use-them/"},{default:p((()=>[w,x,_])),_:1})]),v,z,j,q,P,T,D,F,H,$,I,S,B,E,A,N,O,R,U,C,G,L,W,K,Z,J,M,Y,Q,V,X,nn,sn,an,tn,on,en,pn,cn,ln,un,rn,kn,dn,gn,c("p",null,[c(la,{op:""},{default:p((()=>[hn])),_:1})]),mn,yn,c("p",null,[c(ca,{text:"stackoverflow answer",url:"https://stackoverflow.com/questions/312443/how-do-you-split-a-list-into-evenly-sized-chunks"},{default:p((()=>[fn])),_:1})]),bn,wn,xn,_n,vn,zn,jn,qn,Pn,Tn,Dn,Fn,Hn,$n,In,Sn,Bn,En,An,Nn,On,Rn,Un,Cn,Gn,Ln,Wn,Kn,Zn,Jn,Mn,Yn,Qn,Vn,Xn,ns,ss,as,ts,os,es,ps,cs,ls,us,is,rs,ks,ds,gs,hs,ms,ys,fs,bs,ws,xs,_s,vs,zs,js,qs,Ps,Ts,Ds,Fs,Hs,$s,Is,Ss,Bs,Es,As,Ns,Os,Rs,Us,Cs,Gs,c("p",null,[c(ca,{url:"https://stackoverflow.com/a/15063941/4168837",text:"stackoverflow"},{default:p((()=>[Ls])),_:1})]),Ws,Ks,Zs,Js,Ms,Ys,Qs,Vs,Xs,na,sa,aa,ta,oa,ea])])),_:1})}}};export default pa;
