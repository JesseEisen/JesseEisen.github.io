import{_ as e}from"./app.ee4e96c4.js";import{h as l,o as a,a as n,w as s,b as t,k as u}from"./vendor.5a394a79.js";const o=t("div",null,[t("p",null,"这篇比较介绍从不同地方学来的有关 k8s 的介绍和使用，可能会显得不太有章法。 内容还在不断更新和修正，使用前需要仔细斟酌一下。"),t("h2",{id:"理论"},[t("a",{class:"header-anchor",href:"#理论","aria-hidden":"true"},"#"),u(" 理论")]),t("p",null,"不同的场景使用不同的方式："),t("ul",null,[t("li",null,[t("code",null,"Deployment"),u(" for "),t("strong",null,"stateLess"),u(" Apps")]),t("li",null,[t("code",null,"StatefulSet"),u(" for "),t("strong",null,"stateful"),u(" Apps or DataBase")])]),t("p",null,[t("strong",null,"不过最好将数据库部署在 K8S 的集群外。")]),t("hr"),t("h2",{id:"命令集锦"},[t("a",{class:"header-anchor",href:"#命令集锦","aria-hidden":"true"},"#"),u(" 命令集锦")]),t("ul",null,[t("li",null,"获取当前所有的 pod，不限制命名空间。")]),t("pre",{class:"language-bash"},[t("code",{class:"language-bash"},"$ kubectl get pod -A\n")]),t("ul",null,[t("li",null,"获取当前命名空间下所有的内容（pod,service,deploymenent）")]),t("pre",{class:"language-bash"},[t("code",{class:"language-bash"},"$ kubectl get all -n namespace\n")]),t("ul",null,[t("li",null,"获取当前命名空间下所有的 configmap")]),t("pre",{class:"language-bash"},[t("code",{class:"language-bash"},"$ kubectl get configmap -n namespace\n")]),t("ul",null,[t("li",null,"查看更详细的 pod 信息，主要是为可以看到 pod 在哪个节点上被调度之类的信息。")]),t("pre",{class:"language-bash"},[t("code",{class:"language-bash"},"$ kubectl get pod -o wide -n namespace\n")]),t("ul",null,[t("li",null,"查看各个服务详细信息")]),t("pre",{class:"language-bash"},[t("code",{class:"language-bash"},"$ kubectl -n namespace describe pod  xxxxxx\n")]),t("ul",null,[t("li",null,[u("查看系统的相关服务等，使用命名空间 "),t("code",null,"kube-system")])]),t("pre",{class:"language-bash"},[t("code",{class:"language-bash"},"$ kubectl -n kube-system get pod\n")]),t("ul",null,[t("li",null,"使用相同的配置重新创建一个失败的 pod")]),t("pre",{class:"language-bash"},[t("code",{class:"language-bash"},[u("$ kubectl get pod PODNAME -n NAMESPACE -o yaml "),t("span",{class:"token operator"},"|"),u(" kubectl replace --force -f -\n")])]),t("p",null,"这中间可以保存好生成的 yaml 文件，进行相应的修改，然后再执行 replace 操作")],-1),r={expose:[],setup(t){const u={title:"Kubernetes Hard Way",date:"2021-02-25T00:00:00.000Z",author:"Linkang Chan",twitter:"JessEisen_LJ",description:"kubernetes notes",public:!0,tag:"21D14 kubernetes",meta:[{property:"og:title",content:"Kubernetes Hard Way"},{property:"og:description",content:"kubernetes notes"},{name:"description",content:"kubernetes notes"}]};return l({title:"Kubernetes Hard Way",meta:[{property:"og:title",content:"Kubernetes Hard Way"},{property:"og:description",content:"kubernetes notes"},{name:"description",content:"kubernetes notes"}]}),(l,t)=>{const r=e;return a(),n(r,{frontmatter:u},{default:s((()=>[o])),_:1})}}};export default r;
