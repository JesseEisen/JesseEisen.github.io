---
layout: post
title: Git Use In Action
date: 2018-05-22 18:00:00
description: git use
---

这篇文章主要记录下在日常的不同场景下使用 git 的相关操作。 有时因为某个场景下不是经常碰到，所以命令操作比较生疏，此时需要各种查找，费时费力。且别人的站点有时候可能因为各种原因宕掉。索性自己总结一些，留着后面查阅。

### 一.工作区和暂存区文件

工作区就是我们开发时操作的地方，我们所有未提交的修改都是放在工作区的，当我们执行 `git add` 命令时，修改才会被提交到暂存区， git 的暂存区指的是将需要提交的内容先放到暂存区，在下一次提交时，直接从暂存区提交到版本库。所以当在提交时，如果本地文件仍有修改，此修改是不会被提交到版本库的。下面是几个基础的操作：

+ 撤销工作区文件的修改

```shell
$ git checkout -- filename # 撤销掉该文件在工作区中的修改
```
如果文件的修改没有添加到暂存区，那么 checkout 之后工作区的修改都会丢失，没有办法找回来。

+ 从暂存区里面撤销提交

这个场景出现在我们执行了一次 `git add xxx` 之后，我们的修改被放到了暂存区了。但是发现有些内容不希望此次就提交到版本库。所以在 add 之后，我们将修改从暂存区里面撤出可以这样做：

```shell
$ git reset HEAD filename  # 撤销 git add 操作
```
执行了这个操作之后，暂存区里面的内容被撤销掉，工作区的修改仍然保留着。

+ 删掉不想添加到版本库中的文件

有些时候，我们在执行 add 的时候，会将一些隐藏文件添加进去，虽然我们可以在 .gitignore 中设置不提交，但是已经提交了该如果解决呢？我们可以使用 `git rm` 命令。

1. **删除版本库中文件，但不影响工作区**
    + 文件只提交到暂存区，未提交到版本库
    + 文件已经提交到版本库

这两个场景可以直接使用 `git rm --cached file` 即可。这个操作是撤销 git 对文件的追踪。

1. **删除版本库中的文件，连同工作区文件**

直接 `git rm -f file`。



