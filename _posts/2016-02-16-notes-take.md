---
title: Notes Taking  Workflow On Computer
updated: 2015-12-12 18:00
---

## General

很多时候，我们搜索到一些资料，或者是在看某些toturial的时候，当时能够找到解决方法，或者明白了某一个难点。
也许当时觉得记笔记没有必要，反正自己会了。但是过些时日，又要重新的去搜索。所以记一下笔记是比较有帮助的。

但是有的时候，我们可以借助一些插件，将一些网页保存下来，比如印象笔记的“剪藏”。或者是微博微信上的`@我的印象笔记`.
或者是用pocket这类的稍后阅读的软件进行收藏。但是软件一多，平台一多，笔记就比较杂了。所以一个比较系统的笔记流程还是很有必要的。

## Base Requirement

+ 书写格式统一
+ 便于阅读
+ 便于搜索
+ 利于分享
+ 最好有一个版本管理

一个统一的书写格式，这样不会让笔记显得很乱。笔记写完了，是用来以后自己看的，没有一个好的排版，看起来也是比较费劲的。一旦笔记比较多了后
不可能一个个的打开寻找，需要一个好的搜素系统来找到我们想要的内容（这方面一些成熟的应用表现的会好一些）。最后如果一些笔记觉得还是有分享价值的，
那么最好是不需要太大的改动就可以分享出去。笔记同样需要做一个版本管理，一是为了防止自己的误操作，二来是为了让自己的比较更安全的保存。

鉴于这上面的需求，我总结一个我的解决方案.

## My Solution

1. 统一格式

最简单的格式就是`markdown`了，其他得格式比如（reStructText、AsciiDoc、org-mode） 这些格式也都行，挑选自己比较喜欢或者拿手的。
如果可以的话直接上`Latex`也没有问题。

2. 便于阅读

markdown的文本经过转换之后，可以生成一个html格式的预览，这个格式可以自己调整样式，效果也是不错的。而我采用的是`pandoc`来转换成tex的文档，
然后编译成pdf文本。编译成pdf是最后一步，使用pandoc也是可以将markdown文档转换成想要的html页面的。

3. 便于搜索

我是使用vim，通过一个映射调用`vimgrep`搭配quickfix窗口来实现的一个搜索。当然在Windows系统上你也可以通过安装gvim来实现，
或者是安装一个（cygwin）来获得unix下的一些工具集。

4. 利于分享

和别人分享的途径一个是线下的分享，这可以将自己的笔记编译成一个pdf文件，分享出去。而是可以通过blog的形式分享出去，markdown这个格式刚好
适合用于blog的发布，所以分享这一块也不是什么问题。

5. 版本管理

使用git进行本地的一个版本管理，如果有自己的远程服务器，或者是其他的服务，可以将这些笔记同步上去，这样多个篮子保存。不用担心自己的笔记会丢失。


## Implementation

### Pandoc + Tex

需要事先安装一下环境，同时如果想编译成pdf，同样需要安装Tex环境。这两个好在都不是很困难。前者在Windows和Mac上的安装都比较迅速，只是在linux上安装
Pandoc，不同的发行版由于自己的包管理里面的包的新旧不一样，有的可以利用包管理工具进行安装，有的则需要手动的去安装。具体的参考pandoc官网。

对于后者Tex，可以安装精简的MikTex，遇到需要的包，再逐一的添加上去。或者一股脑的安装上Texlive的最新版本。看个人需求了。

我的目的是编译生成pdf文档，单纯的使用pandoc是可以完成这个工作的，只是某些点上不能让人满意。最初的命令是：

```
pandoc -N --template=xxx.tex  xxx.md --latex_engine=exlatex --variable title="xxx" --variable author="xxx" -o xxx.pdf --toc 
```

使用模板，指定编译引擎，同时设置相关的变量，输出生成pdf。

在这个过程中，需要特别注意markdown的格式，因为格式不正确。会遇到不少的错误。一个不错的调试方式是，将所有的md格式文件，编译成一个tex，然后
根据Latex的提示，找到改行，修改即可。

模板文件可以使用pandoc默认的或者参考我的[模板](https://github.com/JesseEisen/JesseEisen.github.io/tree/master/others)

但是通过这个编译出来的代码或者其他的一些点上会有一些不满意的地方，这就需要一些手动的修改了，但是这么多文件要去修改也是很费劲的。

比如代码的显示：

默认的是格式并不是我所喜欢的，通过手册发现可以使用`--listing` 来改变代码的格式，修改模板中的list包的设置。 再次编译生成tex文件，
发现没有任何的改变，原因在于没有添加`\hfill \\` 这一段标记，因此只能通过修改tex文件。来达到目的。

```
sed -i -e '/begin{description}/,/end{description}/{ /item\[/s/$/\\hfill \\\\/}' Example.tex
```

然后再利用`xelatex`进行编译。如果有`--toc` 需要编译两次。

遇到其他的问题，一个是可以修改模板文件，将某些设置添加上去，另一个就是修改tex文件。后者比较复杂一些。


## Retrieval

我在.vimrc中添加如下的映射：

```
command! -nargs=1 Ngrep vimgrep "<args>"  $NOTES_DIR/**/*.md
nnoremap <leader>[ :Ngrep
```

我只要在vim中键入`<leader>[` 之后输入我想要的搜索的东西即可。 注：上述的[$NOTES_DIR/**/*.md] 替换成你的笔记目录和文件后缀即可。

搜索到结果是再quickfix窗口中显示的，所以可以快速的跳转到相应的结果页面。


## Disadvantage

+ 需要依托相应的环境，需要编译。
+ 纯文本格式的，效果没有富文本的样式多


## Last

这是我个人的笔记系统，不一定适合你，但是可以给你提供一个思路。如果你是emacs党，使用org-mode来做笔记管理，同样是一个不错的方式。

(全文完)


